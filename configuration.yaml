# Home Assistant Configuration - House Location
# GitOps managed via Git Pull add-on

# Basic Home Assistant configuration
homeassistant:
  # Name of the location
  name: "House"
  # Location coordinates (Prague defaults - update secrets.yaml with real values)
  latitude: !secret house_latitude
  longitude: !secret house_longitude
  elevation: !secret house_elevation
  # Unit system and locale
  unit_system: metric
  country: CZ
  time_zone: Europe/Prague
  currency: CZK
  # Core shared packages
  packages: !include_dir_named ../../core/packages
  # Location customizations
  customize: !include customize.yaml

# Loads default set of integrations. Do not remove.
default_config:

# Load frontend themes from the themes folder  
frontend:
  themes: !include_dir_merge_named themes

# MQTT Integration (for Zigbee2MQTT and other devices)
mqtt:
  broker: core-mosquitto
  port: 1883
  username: addons
  password: !secret mqtt_password
  discovery: true
  discovery_prefix: homeassistant

# Core configuration files
automation: !include automations.yaml
script: !include scripts.yaml  
scene: !include scenes.yaml

# Shell commands for GitOps deployment
shell_command:
  deploy_zigbee2mqtt_config: >
    cp /config/zigbee2mqtt_configuration.yaml /config/zigbee2mqtt/configuration.yaml

# Recorder configuration for database optimization
recorder:
  db_url: "sqlite:////config/home-assistant_v2.db"
  purge_keep_days: 30
  include:
    domains:
      - sensor
      - light
      - switch
      - binary_sensor
      - automation
      - person
      - device_tracker
      - input_number
      - input_boolean
  exclude:
    entity_globs:
      - sensor.*_linkquality
      - sensor.*_voltage
      - sensor.*_update_state
      - sensor.home_assistant_*
      - sensor.*_cpu_percent
      - sensor.*_memory_percent

# Logger configuration
logger:
  default: info
  logs:
    homeassistant.components.mqtt: debug
    homeassistant.components.automation: info